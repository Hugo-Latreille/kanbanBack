# O'Kanban - E01 - API & AJAX

## Menu du jour

- Cockpit
  - `API`
  - `AJAX`
  - Setup `GitHub`

- Atelier
  - `MCD`
  - `User-stories`
  - `Wireframes` (bonus)


## API

API : Application Programming Interface (üá´üá∑ Interface de Programmation)

Une web API :
- Interface dont les donn√©es requ√™t√©es (via une URL) transitent via le protocole HTTP 
- Renvoie g√©n√©ralement des donn√©es structur√©es (ex: `JSON`)
- Peuvent √™tre requ√©t√© par diff√©rents clients (ex: `Navigateur`, `Mobile`, `Terminal` (`curl`), `Insomnia`, `Postman`, `VSCode` (`REST Client`))


#### Exemple 

Quelques exemples d'API HTTP : 
- Liste:
  - https://github.com/public-api-lists/public-api-lists
- Vus en cours :
  - https://geo.api.gouv.fr/regions
  - https://www.omdbapi.com/?s=harry%20potter&apikey=1e58f63b
  - https://developer.spotify.com/documentation/web-api/reference/#/operations/get-playlist (‚ö†Ô∏è authentification requise)
  - https://pokeapi.co/docs/v2


## AJAX

`Asynchronous Javascript And XML`: 
- Sert √† requ√™ter une API sans recharger la page 
  - (donc tr√®s utile pour les `SPA` Single Page Applications)

- Exemple de requ√™te AJAX : l'autocompl√©tion de google

Exemple de code pour faire des requ√™tes AJAX en javascript en utilisant [fetch](https://developer.mozilla.org/fr/docs/Web/API/Fetch_API/Using_Fetch)

```js
fetch(URL_STRING, OPTIONS) // Requ√™ter de mani√®re asynchrone
  .then(httpResponse => httpResponse.json()) // Transformer le body de la r√©ponse HTTP en JSON
  .then(data => { // R√©cup√©rer ce json
    console.log(data); // Afficher ses donn√©es
  });


// Ou dans une fonction async :
async function requestData() {
  const httpResponse = await fetch(URL_STRING, OPTIONS);
  const data = await httpResponse.json();
  console.log(data);
}

requestData();
```

## Glossaire

- `CDN`: Content Delivery Network: un ensemble de serveur pour servir des ressources statiques (ex: html, css, js, images, ...)
- `SPA`: Single Page Application


## Architecture client/serveur

![](../resources/archi.jpeg)

### Avantages

- SoC: s√©paratin claire du code client et code backend (donc potentiellement plusieurs √©quipes sur chaque projet)
  - meilleur modularisation du code
- (Re)chargement constant de page (SPA)
- Facilite l'ajout de nouveaux clients (ex: mobile code et desktop code consomment la m√™me API pour r√©cup√©rer les donn√©es)
- (bonus) Facilite l'utilisation de CDN 

### Inconv√©nients

- Architecture plus lourde donc plus lourde √† maintenir
  - plus de configuration probablement
- S√©curit√© :
  - Bien prot√©ger son API 
- Premier chargement de la page peut √™tre un peu lourd
